# PSP.cz Analyzer â€” Environment Variables
# Copy this file to .env and adjust values as needed.

# --- Cache ---
# Directory for downloaded data, parquet caches, PDF texts, etc.
# In Docker this is overridden to /data/cache by docker-compose.yml.
# PSPCZ_CACHE_DIR=~/.cache/pspcz-analyzer/psp

# --- Server port ---
# Port the app listens on (both local dev and Docker).
PORT=8000

# --- Dev mode ---
# Set to "1" for hot reload (local dev), "0" for production.
# In Docker this is overridden to "0" by docker-compose.yml.
PSPCZ_DEV=0

# --- LLM provider ---
# Which LLM backend to use: "ollama" (default) or "openai" (any OpenAI-compatible API).
LLM_PROVIDER=ollama

# --- Ollama (LLM integration) ---
# Used when LLM_PROVIDER=ollama (default).
# Base URL for the Ollama API.
# For Docker: use http://host.docker.internal:11434 to reach Ollama on the host.
# For local dev: use http://localhost:11434.
OLLAMA_BASE_URL=http://host.docker.internal:11434

# Bearer token for Ollama API authentication.
# Leave empty for Ollama instances without auth.
OLLAMA_API_KEY=

# Model name for topic classification and summarization.
OLLAMA_MODEL=qwen3:8b

# --- OpenAI-compatible API ---
# Used when LLM_PROVIDER=openai.
# Works with OpenAI, Azure OpenAI, Together, Groq, vLLM, or any compatible endpoint.
OPENAI_BASE_URL=https://api.openai.com/v1

# API key (required when LLM_PROVIDER=openai). App fails fast if missing.
OPENAI_API_KEY=

# Model name for the OpenAI-compatible API.
OPENAI_MODEL=gpt-4o-mini

# --- Tisk text processing ---
# "0" = pass full tisk text to the LLM (for large-context models, e.g. 120k+).
# "1" = truncate using OLLAMA_MAX_TEXT_CHARS / OLLAMA_VERBATIM_CHARS.
TISK_SHORTENER=0

# --- Daily data refresh ---
# Automatically re-download psp.cz data and reload in-memory state.
# Set to "0" to disable.
DAILY_REFRESH_ENABLED=1

# Hour (CET, 0-23) at which the daily refresh runs.
DAILY_REFRESH_HOUR=3

# --- GitHub Feedback ---
# Allow users to submit feedback as GitHub issues.
# Set to "1" to enable the feedback form on vote detail pages.
GITHUB_FEEDBACK_ENABLED=0

# Personal access token (classic) with `public_repo` scope.
# Required when GITHUB_FEEDBACK_ENABLED=1.
GITHUB_FEEDBACK_TOKEN=

# Repository where issues are created (owner/repo).
GITHUB_FEEDBACK_REPO=tadeasf/pspcz_analyzer

# Comma-separated labels applied to feedback issues.
GITHUB_FEEDBACK_LABELS=user-feedback
