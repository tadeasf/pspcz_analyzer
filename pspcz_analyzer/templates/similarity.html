{% extends "base.html" %}
{% block title %}{{ _("nav.similarity") }} â€” {{ _("site.short_title") }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{{ _("similarity.title") }}</h1>
    <p>{{ _("similarity.subtitle") }}</p>
</div>

<details class="methodology">
    <summary>{{ _("similarity.methodology_title") }}</summary>
    <article>
        <ol>
            <li><strong>{{ _("similarity.methodology.step1") }}</strong></li>
            <li><strong>{{ _("similarity.methodology.step2") }}</strong></li>
            <li><strong>{{ _("similarity.methodology.step3") }}</strong></li>
        </ol>
        <p>{{ _("similarity.methodology.cross_party") }}</p>
    </article>
</details>

<div class="chart-container">
    <img src="/charts/similarity.png?period={{ period }}" alt="{{ _('similarity.title') }}" loading="lazy"
         style="max-height: 700px;">
</div>

<h2>{{ _("similarity.top_pairs") }}</h2>
<p>{{ _("similarity.top_pairs_desc") }}</p>

<div id="results" hx-get="/api/similarity?top=20&period={{ period }}" hx-trigger="load" hx-indicator="#loading">
    <div class="skeleton">{% for _ in range(8) %}
    <div class="skeleton-pulse skeleton-table-row"></div>
    {% endfor %}</div>
</div>
<span id="loading" class="htmx-indicator" aria-busy="true">{{ _("loading") }}</span>
{% endblock %}
