<p><strong>{{ total }}</strong> votes found (page {{ page }}/{{ total_pages }})</p>

<div class="overflow-auto">
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Result</th>
                <th>For</th>
                <th>Against</th>
                <th>Abstained</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
            <tr>
                <td><small>{{ row.datum }}<br>{{ row.cas }}</small></td>
                <td>
                    {% if row.nazev_kratky %}
                    {{ row.nazev_kratky }}
                    {% elif row.nazev_dlouhy %}
                    {{ row.nazev_dlouhy[:120] }}{% if row.nazev_dlouhy|length > 120 %}...{% endif %}
                    {% else %}
                    <em>Session {{ row.schuze }}, vote {{ row.cislo }}</em>
                    {% endif %}
                    {% if row.tisk_url %}
                    <br><small><a href="{{ row.tisk_url }}" target="_blank">Tisk {{ row.tisk_ct }}</a></small>
                    {% endif %}
                    {% if row.tisk_topics %}
                    <br>{% for t in row.tisk_topics %}<span class="topic-badge">{{ t }}</span>{% endfor %}
                    {% endif %}
                </td>
                <td>
                    {% if row.vysledek == "A" %}
                    <span class="result-passed">{{ row.outcome_label }}</span>
                    {% elif row.vysledek == "R" %}
                    <span class="result-rejected">{{ row.outcome_label }}</span>
                    {% else %}
                    {{ row.outcome_label }}
                    {% endif %}
                </td>
                <td>{{ row.pro }}</td>
                <td>{{ row.proti }}</td>
                <td>{{ row.zdrzel }}</td>
                <td>
                    <a href="/votes/{{ row.id_hlasovani }}?period={{ period }}" class="btn-outline btn-small">Detail</a>
                    <a href="https://www.psp.cz/sqw/hlasy.sqw?G={{ row.id_hlasovani }}" target="_blank" class="btn-small" style="font-size: 0.8rem;">psp.cz</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if total_pages > 1 %}
<div class="pagination">
    {% if page > 1 %}
    <a href="#" hx-get="/api/votes?period={{ period }}&search={{ search }}&outcome={{ outcome }}&topic={{ topic }}&page={{ page - 1 }}"
       hx-target="#results" hx-indicator="#loading">&larr; Previous</a>
    {% endif %}
    <span>Page {{ page }} of {{ total_pages }}</span>
    {% if page < total_pages %}
    <a href="#" hx-get="/api/votes?period={{ period }}&search={{ search }}&outcome={{ outcome }}&topic={{ topic }}&page={{ page + 1 }}"
       hx-target="#results" hx-indicator="#loading">Next &rarr;</a>
    {% endif %}
</div>
{% endif %}
